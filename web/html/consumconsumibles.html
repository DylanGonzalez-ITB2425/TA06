<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe de Precipitación</title>
    <link rel="stylesheet" href="/css/E03.css">
</head>
<body>

    <header>
        <h1>CALCULADORA SOSTENIBLE</h1>
    </header>

    <!-- Menú -->
    <nav>
        <ul>
            <li><a href="/index.html">Inici</a></li>
            <li><a href="/html/consumaigua.html">Consum d'aigua</a></li>
            <li><a href="/html/consumelectric.html">Consum electric</a></li>
            <li><a href="/html/consumconsumibles.html">Consum de consumibles</a></li>
            <li><a href="/html/consumproductes.html">Consum de productes</a></li>
            <li><a href="/html/maobra.html">Mà d'obre</a></li>
            <li><a href="/html/infografia.html">Infografia</a></li>
        </ul>
    </nav>
    

    <main>
        <section>
            <h2>Estadísticas Generales</h2>
            <table>
                <thead>
                    <tr>
                        <th>Año</th>
                        <th>Media (mm)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2006</td>
                        <td>13.93</td>
                    </tr>
                    <tr>
                        <td>2007</td>
                        <td>10.62</td>
                    </tr>
                    <tr>
                        <td>2008</td>
                        <td>10.38</td>
                    </tr>
                    <tr>
                        <td>2009</td>
                        <td>10.59</td>
                    </tr>
                    <tr>
                        <td>2010</td>
                        <td>8.28</td>
                    </tr>
                    <tr>
                        <td>2011</td>
                        <td>9.97</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h2>Medias Anuales de Precipitación</h2>
            <table id="precipitation-table">
                <thead>
                    <tr>
                        <th>Año</th>
                        <th>Media (mm)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>2006</td>
                        <td>13.93</td>
                    </tr>
                    <tr>
                        <td>2007</td>
                        <td>10.62</td>
                    </tr>
                    <tr>
                        <td>2008</td>
                        <td>10.38</td>
                    </tr>
                    <tr>
                        <td>2009</td>
                        <td>10.59</td>
                    </tr>
                    <tr>
                        <td>2010</td>
                        <td>8.28</td>
                    </tr>
                    <tr>
                        <td>2011</td>
                        <td>9.97</td>
                    </tr>
                </tbody>
            </table>
            <div class="load-more-button-container">
                <button id="load-more" class="load-more-button">Cargar más</button>
            </div>
        </section>

        <!-- Botón para exportar a CSV -->
        <button id="export-csv" class="export-button">Exportar a CSV</button>
    </main>

    <footer>
        <p>&copy; 2025 Informe de Precipitación</p>
    </footer>

    <script>
        // Datos de los años que faltan
        const precipitationData = [
            { year: 2012, value: 10.09 },
            { year: 2013, value: 12.08 },
            { year: 2014, value: 10.36 },
            { year: 2015, value: 12.67 },
            { year: 2016, value: 10.19 },
            { year: 2017, value: 11.62 },
            { year: 2018, value: 11.43 },
            { year: 2019, value: 12.35 },
            { year: 2020, value: 11.99 },
            { year: 2021, value: 14.58 },
            { year: 2022, value: 13.85 },
            { year: 2023, value: 9.53 },
            { year: 2024, value: 9.59 },
            { year: 2025, value: 9.68 },
            { year: 2026, value: 11.15 },
            { year: 2027, value: 14.31 },
            { year: 2028, value: 9.07 },
            { year: 2029, value: 9.64 },
            { year: 2030, value: 12.76 },
            { year: 2031, value: 12.64 },
            { year: 2032, value: 13.08 },
            { year: 2033, value: 12.10 },
            { year: 2034, value: 9.53 },
            { year: 2035, value: 9.72 },
            { year: 2036, value: 11.19 },
            { year: 2037, value: 11.02 },
            { year: 2038, value: 9.94 },
            { year: 2039, value: 13.45 },
            { year: 2040, value: 11.10 },
            { year: 2041, value: 10.33 },
            { year: 2042, value: 11.39 },
            { year: 2043, value: 10.28 },
            { year: 2044, value: 10.89 },
            { year: 2045, value: 10.56 },
            { year: 2046, value: 9.98 },
            { year: 2047, value: 10.83 },
            { year: 2048, value: 10.28 },
            { year: 2049, value: 11.56 },
            { year: 2050, value: 10.46 },
            { year: 2051, value: 9.64 },
            { year: 2052, value: 8.57 },
            { year: 2053, value: 10.69 },
            { year: 2054, value: 12.90 },
            { year: 2055, value: 11.99 },
            { year: 2056, value: 9.39 },
            { year: 2057, value: 11.99 },
            { year: 2058, value: 9.39 },
            { year: 2059, value: 8.27 },
            { year: 2060, value: 8.56 },
            { year: 2061, value: 9.38 },
            { year: 2062, value: 8.43 },
            { year: 2063, value: 10.27 },
            { year: 2064, value: 8.75 },
            { year: 2065, value: 9.63 },
            { year: 2066, value: 10.27 },
            { year: 2067, value: 12.41 },
            { year: 2068, value: 9.56 },
            { year: 2069, value: 8.75 },
            { year: 2070, value: 11.15 },
            { year: 2071, value: 12.60 },
            { year: 2072, value: 8.51 },
            { year: 2073, value: 9.55 },
            { year: 2074, value: 10.22 },
            { year: 2075, value: 9.98 }
        ];

        let currentIndex = 0;
        const rowsPerLoad = 10;

        // Función para agregar filas a la tabla
        function loadMoreData() {
            const tableBody = document.querySelector("#precipitation-table tbody");
            const endIndex = currentIndex + rowsPerLoad;
            const dataToAdd = precipitationData.slice(currentIndex, endIndex);

            dataToAdd.forEach(data => {
                const newRow = document.createElement('tr');
                newRow.innerHTML = `
                    <td>${data.year}</td>
                    <td>${data.value}</td>
                `;
                tableBody.appendChild(newRow);
            });

            currentIndex = endIndex;

            // Si ya no hay más datos, ocultamos el botón
            if (currentIndex >= precipitationData.length) {
                document.getElementById('load-more').style.display = 'none';
            }
        }

        // Evento para el botón "Cargar más"
        document.getElementById('load-more').addEventListener('click', loadMoreData);

        // Función para exportar los datos de la tabla a un archivo CSV
        function exportToCSV() {
            const rows = document.querySelectorAll("#precipitation-table tr");
            let csvContent = "Año,Media (mm)\n"; // Encabezado del CSV

            rows.forEach(row => {
                const cells = row.querySelectorAll("td, th");
                let rowData = Array.from(cells).map(cell => cell.textContent).join(",");
                csvContent += rowData + "\n";
            });

            // Crear un enlace para descargar el archivo CSV
            const link = document.createElement("a");
            const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
            link.href = URL.createObjectURL(blob);
            link.download = "precipitacion.csv";
            link.click();
        }

        // Evento para el botón de exportación
        document.getElementById('export-csv').addEventListener('click', exportToCSV);
    </script>

</body>
</html>
